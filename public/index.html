<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lokales Netzwerk</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body data-theme="dark">
    <div class="page">
      <div class="top-bar" id="topBar" style="display: none">
        <button class="settings-btn" id="settingsBtn" aria-label="Einstellungen öffnen">
          <span class="settings-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z" />
            </svg>
          </span>
          <span class="settings-text">Einstellungen</span>
        </button>
        <div class="chip" id="versionChip">Letzte Version: --</div>
      </div>

      <div class="hero">
        <h1>Lokales Netzwerk</h1>
      </div>

      <section class="card login-card" id="loginCard">
        <div class="section-title">
          <h3>Login</h3>
        </div>
        <div class="login-grid">
          <div class="input-row">
            <label for="userInput">Benutzername</label>
            <input id="userInput" type="text" autocomplete="username" placeholder="Benutzername" />
          </div>
          <div class="input-row">
            <label for="passInput">Passwort</label>
            <input id="passInput" type="password" autocomplete="current-password" placeholder="Passwort" />
          </div>
          <div class="input-row">
            <label for="tokenInput">Login-Token (optional)</label>
            <input id="tokenInput" type="text" autocomplete="off" placeholder="Token für dieses Gerät" />
          </div>
          <div class="actions">
            <button class="btn" id="loginBtn">Einloggen</button>
          </div>
          <div class="status" id="loginStatus" hidden></div>
        </div>
      </section>

      <main id="app" style="display: none">
        <div class="grid two equal-height" style="margin-bottom: 16px">
          <section class="card">
            <div class="section-title">
              <div class="section-header">
                <span class="icon-badge" aria-hidden="true">
                  <svg viewBox="0 0 64 64">
                    <rect x="8" y="24" width="48" height="16" rx="3" fill="#2d2d2d" />
                    <circle cx="16" cy="32" r="2.5" fill="#4ade80" />
                    <circle cx="24" cy="32" r="2.5" fill="#4ade80" />
                    <circle cx="32" cy="32" r="2.5" fill="#4ade80" />
                    <circle cx="40" cy="32" r="2.5" fill="#4ade80" />
                    <circle cx="48" cy="32" r="2.5" fill="#4ade80" />
                    <rect x="16" y="42" width="5" height="8" rx="1" fill="#2d2d2d" />
                    <rect x="24" y="42" width="5" height="8" rx="1" fill="#2d2d2d" />
                    <rect x="32" y="42" width="5" height="8" rx="1" fill="#2d2d2d" />
                    <rect x="40" y="42" width="5" height="8" rx="1" fill="#2d2d2d" />
                  </svg>
                </span>
                <h3>Switch (8 Ports)</h3>
              </div>
            </div>
            <table class="table" id="switchTable">
              <thead>
                <tr>
                  <th>Port</th>
                  <th>Belegung</th>
                  <th>Farbe</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>

          <section class="card">
            <div class="section-title">
              <div class="section-header">
                <span class="icon-badge" aria-hidden="true">
                  <svg viewBox="0 0 64 64">
                    <rect x="10" y="28" width="44" height="22" rx="6" fill="#3d6aff" />
                    <rect x="18" y="34" width="6" height="6" rx="2" fill="#e6efff" />
                    <rect x="28" y="34" width="6" height="6" rx="2" fill="#e6efff" />
                    <rect x="38" y="34" width="6" height="6" rx="2" fill="#e6efff" />
                    <path
                      d="M20 28c4-8 20-8 24 0"
                      fill="none"
                      stroke="#9ab4ff"
                      stroke-width="3"
                      stroke-linecap="round"
                    />
                  </svg>
                </span>
                <h3>WLAN Router</h3>
              </div>
            </div>
            <table class="table" id="routerTable">
              <thead>
                <tr>
                  <th>Port</th>
                  <th>Belegung</th>
                  <th>Farbe</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>
        </div>

        <section class="card raspberry-card" style="margin-bottom: 16px">
          <div class="section-title">
            <div class="section-header">
              <span class="icon-badge" aria-hidden="true">
                <svg viewBox="0 0 64 64">
                  <circle cx="32" cy="36" r="18" fill="#d63a3a" />
                  <circle cx="24" cy="32" r="8" fill="#e86a6a" opacity="0.7" />
                  <path d="M32 10c8 0 14 5 16 12-6 0-12-4-16-12z" fill="#3fa64a" />
                  <path d="M32 10c-8 0-14 5-16 12 6 0 12-4 16-12z" fill="#4cc063" />
                </svg>
              </span>
              <h3>PiHole</h3>
            </div>
          </div>
          <div class="input-row">
            <label for="piModel">Modell</label>
            <input id="piModel" type="text" placeholder="Raspberry Pi Zero 2 W" />
          </div>
          <div class="input-row">
            <label for="piHostname">Hostname</label>
            <input id="piHostname" type="text" placeholder="raspberrypi" />
          </div>
          <div class="input-row">
            <label for="piIp">LAN-IP</label>
            <input id="piIp" type="text" placeholder="192.168.1.50" />
          </div>
          <div class="input-row">
            <label for="piVpnIp">VPN-IP</label>
            <input id="piVpnIp" type="text" placeholder="100.x.x.x" />
          </div>
          <div class="input-row">
            <label for="piMac">MAC-Adresse</label>
            <input id="piMac" type="text" placeholder="b8:27:eb:xx:xx:xx" />
          </div>
          <div class="input-row">
            <label for="piUser">SSH-User</label>
            <input id="piUser" type="text" placeholder="pi" />
          </div>
          <div class="input-row">
            <label for="piHoleUrl">Pi-hole Admin URL</label>
            <input id="piHoleUrl" type="text" placeholder="http://pi.hole/admin" />
          </div>
          <div class="input-row">
            <label for="piHoleRemoteUrl">Pi-hole VPN URL</label>
            <input id="piHoleRemoteUrl" type="text" placeholder="http://100.x.x.x/admin" />
          </div>
          <div class="link-row">
            <a class="btn link-btn" id="piHoleLink" href="#" target="_blank" rel="noopener">--</a>
            <a class="btn link-btn" id="piHoleRemoteLink" href="#" target="_blank" rel="noopener">--</a>
          </div>
          <div class="status success" id="raspberryStatus" hidden>Gespeichert.</div>
        </section>

        <section class="card" style="margin-bottom: 16px">
          <div class="section-title">
            <div class="section-header">
              <span class="icon-badge" aria-hidden="true">
                <svg viewBox="0 0 64 64">
                  <rect x="10" y="28" width="44" height="22" rx="6" fill="#3d6aff" />
                  <rect x="18" y="34" width="6" height="6" rx="2" fill="#e6efff" />
                  <rect x="28" y="34" width="6" height="6" rx="2" fill="#e6efff" />
                  <rect x="38" y="34" width="6" height="6" rx="2" fill="#e6efff" />
                  <path
                    d="M20 28c4-8 20-8 24 0"
                    fill="none"
                    stroke="#9ab4ff"
                    stroke-width="3"
                    stroke-linecap="round"
                  />
                </svg>
              </span>
              <h3>Speedport Infos</h3>
            </div>
          </div>
          <div class="input-row">
            <label for="wifiName">WLAN-Name</label>
            <input id="wifiName" type="text" placeholder="SSID" />
          </div>
          <div class="input-row">
            <label for="wifiPass">WLAN-Passwort (Schlüssel)</label>
            <input id="wifiPass" type="text" placeholder="Passwort" />
          </div>
          <div class="input-row">
            <label for="serial">Serien-Nummer</label>
            <input id="serial" type="text" placeholder="Seriennummer" />
          </div>
          <div class="input-row">
            <label for="config">Konfiguration</label>
            <input id="config" type="text" placeholder="z. B. Profil-Stand" />
          </div>
          <div class="input-row">
            <label for="speedportRemoteUrl">Speedport VPN URL</label>
            <input id="speedportRemoteUrl" type="text" placeholder="http://192.168.1.1" />
          </div>
          <div class="input-row">
            <label for="devicePass">Gerätepasswort</label>
            <input id="devicePass" type="text" placeholder="Gerätepasswort" />
          </div>
          <div class="input-row">
            <label for="modemId">Modem-ID</label>
            <input id="modemId" type="text" placeholder="Modem-ID" />
          </div>
          <div class="status success" id="speedportStatus" hidden>Gespeichert.</div>
          <div class="link-row">
            <a class="btn link-btn" id="speedportLink" href="#" target="_blank" rel="noopener">--</a>
            <a class="btn link-btn" id="speedportRemoteLink" href="#" target="_blank" rel="noopener">--</a>
          </div>
        </section>

        <section class="card" style="margin-bottom: 16px">
          <div class="section-title">
            <div class="section-header">
              <span class="icon-badge" aria-hidden="true">
                <svg viewBox="0 0 64 64">
                  <path d="M32 48 A20 20 0 0 1 12 32 A20 20 0 0 1 32 12 A20 20 0 0 1 52 32" fill="none" stroke="#f97316" stroke-width="4" stroke-linecap="round" />
                  <circle cx="32" cy="32" r="3" fill="#fb923c" />
                  <path d="M32 32 L45 20" stroke="#ea580c" stroke-width="3" stroke-linecap="round" />
                  <text x="32" y="52" text-anchor="middle" font-size="10" fill="#fdba74" font-weight="600">Mbit/s</text>
                </svg>
              </span>
              <h3>Internet Geschwindigkeit</h3>
            </div>
          </div>
          <div class="speedtest-container">
            <div class="speedtest-gauge-wrapper">
              <svg viewBox="0 0 300 220" class="speedtest-gauge">
                <!-- Background arc -->
                <path d="M 30 170 A 120 120 0 0 1 270 170" fill="none" stroke="var(--border)" stroke-width="30" stroke-linecap="round"/>

                <!-- Progress arc -->
                <path id="speedArc" d="M 30 170 A 120 120 0 0 1 270 170" fill="none" stroke="var(--accent)" stroke-width="30" stroke-linecap="round" stroke-dasharray="377" stroke-dashoffset="377"/>

                <!-- Geschwindigkeits-Labels außen rum -->
                <text x="10" y="195" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-muted)">0</text>
                <text x="25" y="75" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-muted)">100</text>
                <text x="95" y="25" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-muted)">200</text>
                <text x="150" y="15" text-anchor="middle" font-size="14" font-weight="700" fill="var(--accent)">500</text>
                <text x="205" y="25" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-muted)">800</text>
                <text x="275" y="75" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-muted)">1000</text>
                <text x="290" y="195" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-muted)">1200+</text>

                <!-- Center circle -->
                <circle cx="150" cy="170" r="70" fill="var(--surface-2)"/>

                <!-- Speed value -->
                <text id="speedValue" x="150" y="155" text-anchor="middle" font-size="40" font-weight="700" fill="var(--text)">0</text>
                <text x="150" y="180" text-anchor="middle" font-size="14" fill="var(--text-muted)">Mbit/s</text>
                <text id="speedLabel" x="150" y="195" text-anchor="middle" font-size="12" fill="var(--text-muted)">Bereit</text>
              </svg>
            </div>
            <div class="speedtest-note" id="speedtestNotice" aria-live="polite"></div>
            <div class="speedtest-stats">
              <div class="speedtest-stat">
                <span class="speedtest-stat-label">Download</span>
                <span class="speedtest-stat-value" id="downloadSpeed">-- Mbit/s</span>
              </div>
              <div class="speedtest-stat">
                <span class="speedtest-stat-label">Upload</span>
                <span class="speedtest-stat-value" id="uploadSpeed">-- Mbit/s</span>
              </div>
              <div class="speedtest-stat">
                <span class="speedtest-stat-label">Ping</span>
                <span class="speedtest-stat-value" id="pingSpeed">-- ms</span>
              </div>
            </div>
            <div class="speedtest-buttons">
              <button class="btn" id="startLocalTest">Speed-Test starten</button>
            </div>
          </div>
        </section>
      </main>

      <footer class="site-footer">
        <span>made by <a href="https://github.com/leminkozey" target="_blank" rel="noopener">leminkozey</a></span>
        <span class="version">v1.5.0</span>
      </footer>

    </div>

    <div class="overlay" id="settingsOverlay">
      <div class="settings-modal">
        <div class="settings-header">
          <h3>Einstellungen</h3>
          <button class="close-btn" id="closeSettings" aria-label="Schließen">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="settings-body">
          <nav class="settings-sidebar">
            <button class="settings-tab active" data-tab="design">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="3" />
                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
              </svg>
              <span>Design</span>
            </button>
            <button class="settings-tab" data-tab="daten">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M4 7v10c0 1 1 2 2 2h12c1 0 2-1 2-2V7" />
                <path d="M4 7c0-1 1-2 2-2h12c1 0 2 1 2 2" />
                <path d="M12 11v6M9 14l3 3 3-3" />
              </svg>
              <span>Daten</span>
            </button>
            <button class="settings-tab" data-tab="session">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="9" />
                <path d="M12 6v6l4 2" />
              </svg>
              <span>Session</span>
            </button>
            <button class="settings-tab" data-tab="user">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="8" r="4" />
                <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
              </svg>
              <span>User</span>
            </button>
            <button class="settings-tab" data-tab="credits">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="9" />
                <circle cx="12" cy="8" r="1" fill="currentColor" />
                <path d="M12 11v5" stroke-width="2" />
              </svg>
              <span>Credits</span>
            </button>
          </nav>
          <div class="settings-content">
            <div class="settings-panel active" id="panel-design">
              <h4>Design</h4>
              <div class="setting-row">
                <label>Theme</label>
                <div class="theme-switcher" id="themeSwitcher" data-position="0">
                  <span class="theme-slider"></span>
                  <button class="theme-option active" data-value="dark" aria-label="Dark Mode">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"/>
                    </svg>
                  </button>
                  <button class="theme-option" data-value="system" aria-label="System Mode">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <rect x="2" y="3" width="20" height="14" rx="2"/>
                      <path d="M8 21h8M12 17v4"/>
                    </svg>
                  </button>
                  <button class="theme-option" data-value="light" aria-label="Light Mode">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <circle cx="12" cy="12" r="4"/>
                      <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div class="setting-row">
                <label>Button-Stil</label>
                <div class="toggle-group" id="buttonStyleGroup">
                  <button class="toggle-option active" data-value="default">Default</button>
                  <button class="toggle-option" data-value="simple">Simpel</button>
                </div>
              </div>
              <div class="setting-row">
                <label>Glow-Staerke</label>
                <div class="glow-control">
                  <span class="glow-icon" data-variant="low">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <circle cx="12" cy="12" r="4"/>
                    </svg>
                  </span>
                  <input type="range" id="glowStrength" class="glow-slider" min="0" max="2" step="0.1" value="1" />
                  <span class="glow-icon" data-variant="high">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                      <circle cx="12" cy="12" r="4"/>
                      <path d="M12 2v3M12 19v3M4.2 4.2l2.1 2.1M17.7 17.7l2.1 2.1M2 12h3M19 12h3M4.2 19.8l2.1-2.1M17.7 6.3l2.1-2.1"/>
                    </svg>
                  </span>
                </div>
              </div>
              <div class="setting-row">
                <label>Akzentfarbe</label>
                <div class="accent-picker" id="accentPicker">
                  <button class="accent-option active" data-color="#00d4ff" style="--swatch: #00d4ff" aria-label="Cyan"></button>
                  <button class="accent-option" data-color="#a855f7" style="--swatch: #a855f7" aria-label="Purple"></button>
                  <button class="accent-option" data-color="#22c55e" style="--swatch: #22c55e" aria-label="Green"></button>
                  <button class="accent-option" data-color="#f97316" style="--swatch: #f97316" aria-label="Orange"></button>
                  <button class="accent-option" data-color="#ec4899" style="--swatch: #ec4899" aria-label="Pink"></button>
                </div>
              </div>
            </div>
            <div class="settings-panel" id="panel-daten">
              <h4>Versionen</h4>
              <div class="version-section">
                <label>Port-Belegungen</label>
                <select class="version-select" id="versionSelect"></select>
                <span class="muted version-details" id="versionDetails"></span>
              </div>
              <div class="version-section">
                <label>Speedport</label>
                <select class="version-select" id="speedportVersionSelect"></select>
                <span class="muted version-details" id="speedportVersionDetails"></span>
              </div>
              <div class="version-section">
                <label>PiHole / Raspberry</label>
                <select class="version-select" id="raspberryVersionSelect"></select>
                <span class="muted version-details" id="raspberryVersionDetails"></span>
              </div>
              <hr class="settings-divider" />
              <h4>Export / Import</h4>
              <p class="setting-description">Exportiere oder importiere alle Daten (inkl. Credentials).</p>
              <div class="export-import-buttons">
                <button class="btn" id="exportBtn">Daten exportieren</button>
                <label class="btn secondary import-label">
                  Daten importieren
                  <input type="file" id="importFile" accept=".json" hidden />
                </label>
              </div>
            </div>
            <div class="settings-panel" id="panel-session">
              <h4>Session Timeout</h4>
              <p class="setting-description">Automatisch ausloggen nach Inaktivitaet.</p>
              <div class="setting-row">
                <label>Timeout aktivieren</label>
                <div class="toggle-group" id="timeoutToggleGroup">
                  <button class="toggle-option" data-value="off">Aus</button>
                  <button class="toggle-option active" data-value="on">An</button>
                </div>
              </div>
              <div class="setting-row" id="timeoutMinutesRow">
                <label>Minuten bis Timeout</label>
                <input type="number" id="timeoutMinutes" class="timeout-input" value="5" min="1" max="60" />
              </div>
            </div>
            <div class="settings-panel" id="panel-user">
              <h4>Benutzer & Passwort</h4>
              <form id="credentialForm">
                <div class="input-row">
                  <label for="newUser">Neuer Benutzer</label>
                  <input id="newUser" type="text" autocomplete="username" />
                </div>
                <div class="input-row">
                  <label for="newPass">Neues Passwort</label>
                  <input id="newPass" type="password" autocomplete="new-password" />
                </div>
                <div class="actions">
                  <button class="btn" type="submit">Speichern</button>
                  <span class="muted" id="credentialStatus"></span>
                </div>
              </form>
              <hr class="settings-divider" />
              <button class="btn logout-btn" id="logoutBtn">Ausloggen</button>
            </div>
            <div class="settings-panel" id="panel-credits">
              <div class="credits-content">
                <img class="credits-avatar" src="https://github.com/leminkozey.png" alt="leminkozey" />
                <span class="credits-label">made by</span>
                <a class="credits-name" href="https://github.com/leminkozey" target="_blank" rel="noopener">leminkozey</a>
                <span class="credits-version">v1.5.0</span>
                <a class="credits-repo" href="https://github.com/leminkozey/netzwerk-manager" target="_blank" rel="noopener">
                  Bleibe immer aktuell
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="overlay" id="logoutOverlay">
      <div class="overlay-content">
        <h3>Sitzung beendet</h3>
        <p id="logoutReason">Ein anderes Gerät hat sich angemeldet.</p>
        <button class="btn" id="reloginBtn">Erneut einloggen</button>
      </div>
    </div>

    <div class="overlay" id="timeoutOverlay">
      <div class="overlay-content">
        <h3>Session abgelaufen</h3>
        <p class="timeout-hint">Du kannst die Zeit in den Einstellungen anpassen oder deaktivieren.</p>
        <div class="timeout-buttons">
          <button class="btn secondary" id="timeoutSettingsBtn">Einstellungen</button>
          <button class="btn" id="timeoutLoginBtn">Login</button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
